
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QEJPE16TH2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-QEJPE16TH2');
    </script>
    
    <title>Working with Tables &#8212; Tabsdata v0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=1e778574" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=5ae79a96"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guide/06_working_with_tables/main';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://docs.tabsdata.com/latest/_static/version.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.9.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script src="../../_static/custom.js?v=4c20ed59"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.9.0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>


  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
     
  

<a class="navbar-brand logo" href="https://tabsdata.com/">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/tabsdata_root.png" class="logo__image only-light" alt="Tabsdata v0.0 documentation - Home"/>
    <img src="../../_static/tabsdata.png" class="logo__image only-dark pst-js-only" alt="Tabsdata v0.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../intro.html">
    Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api_ref/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../intro.html">
    Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api_ref/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Working with Tables</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="working-with-tables">
<span id="id1"></span><h1>Working with Tables<a class="headerlink" href="#working-with-tables" title="Link to this heading">#</a></h1>
<p>A table is the basic unit of operation inside Tabsdata. A Tabsdata table is data organized in rows and columns, similar to a database table. Each column has a name and all the values in the column have the same data type. A Tabsdata table only exsists inside the Tabsdata server.</p>
<p>Tables are created in Tabsdata by publishers importing external source data as tables inside the Tabsdata server or by transformers processing some tables in the server to create new ones.</p>
<p>You can use any Tabsdata table, including previous versions of tables, as input to create or modify other tables in Tabsdata. You can also export Tabsdata tables to external systems as <a href="#id4"><span class="problematic" id="id5">|extensions_list_sub|</span></a> files.</p>
<section id="table-operations">
<span id="id2"></span><h2>Table Operations<a class="headerlink" href="#table-operations" title="Link to this heading">#</a></h2>
<p>Detailed table operations supported by Tabsdata are covered in our API Reference document <a class="reference external" href="https://docs.tabsdata.com/latest/api_ref/tableframe.html">here</a>.</p>
<p>Some of the key table operations are demonstrated below using the following persons Tabsdata table:</p>
<p>To work with the table, you define a transformer as follows,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tabsdata</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">td</span>


<span class="nd">@td</span><span class="o">.</span><span class="n">transformer</span><span class="p">(</span>
    <span class="n">input_tables</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;persons&quot;</span><span class="p">],</span>
    <span class="n">output_tables</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;persons_modified&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">transf</span><span class="p">(</span><span class="n">tf</span><span class="p">:</span> <span class="n">td</span><span class="o">.</span><span class="n">TableFrame</span><span class="p">):</span>
    <span class="n">tf_modified</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">function_logic</span><span class="o">&gt;</span>
    <span class="k">return</span> <span class="n">tf_modified</span>
</pre></div>
</div>
<p>where &lt;function_logic&gt; can be substituted with various table operations that are demonstrated in the following sections.</p>
<section id="projection">
<h3>Projection<a class="headerlink" href="#projection" title="Link to this heading">#</a></h3>
<p>Projection operations derive projected views from underlying tables.</p>
<section id="column-selection">
<h4>Column selection<a class="headerlink" href="#column-selection" title="Link to this heading">#</a></h4>
<p>Here is an example code to select specific columns from a table.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<p>&lt;&lt;&lt;Table&gt;&gt;&gt;</p>
</section>
<section id="dropping-a-column">
<h4>Dropping a column<a class="headerlink" href="#dropping-a-column" title="Link to this heading">#</a></h4>
<p>Here is an example code to drop specific columns from a table, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<p>&lt;&lt;&lt;Table&gt;&gt;&gt;</p>
</section>
<section id="columns-concatenation">
<h4>Columns concatenation:<a class="headerlink" href="#columns-concatenation" title="Link to this heading">#</a></h4>
<p>Here is an example code to concatenate 2 columns from a table and call the output column “full_name”, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;full_name&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>&lt;&lt;Output:&gt;&gt;</p>
</section>
<section id="columns-string-expressions">
<h4>Columns string expressions:<a class="headerlink" href="#columns-string-expressions" title="Link to this heading">#</a></h4>
<p>Here is an example code to convert the last_name column to upper case, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">to_uppercase</span><span class="p">())</span>
</pre></div>
</div>
<p>&lt;&lt;Output&gt;&gt;</p>
</section>
<section id="columns-type-casting-and-datetime-expressions">
<h4>Columns type casting and datetime expressions:<a class="headerlink" href="#columns-type-casting-and-datetime-expressions" title="Link to this heading">#</a></h4>
<p>Here is an example code to convert the values in the birthdate column to polars Date format, select the year from the converted value, and call the resultant column birth_year, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birthdate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">polars</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;birth_year&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="columns-numeric-expressions">
<h4>Columns numeric expressions:<a class="headerlink" href="#columns-numeric-expressions" title="Link to this heading">#</a></h4>
<p>Here is an example code to select the “height” column from the table, multiply the values to hundred, and name the result column “height_in_cm”, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;height_in_cm&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="filter">
<h3>Filter<a class="headerlink" href="#filter" title="Link to this heading">#</a></h3>
<section id="single-condition-on-column-value">
<h4>Single condition on column value:<a class="headerlink" href="#single-condition-on-column-value" title="Link to this heading">#</a></h4>
<p>Here is an example code to filter the values of the last_name column by the first letter as “A”, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="multiple-conditions-on-column-values">
<h4>Multiple conditions on column values:<a class="headerlink" href="#multiple-conditions-on-column-values" title="Link to this heading">#</a></h4>
<p>Here is an example code to filter by multiple conditions on height and last_name column, where tf is the Tabsdata tableframe variable storing the underlying table. &lt;hyperlink to sample data&gt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">filter</span><span class="p">((</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.80</span><span class="p">)</span><span class="o">.</span><span class="n">and_</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>OR</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">filter</span><span class="p">((</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.80</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">starts_with</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="aggregation">
<h3>Aggregation<a class="headerlink" href="#aggregation" title="Link to this heading">#</a></h3>
<p>Here is an example code to group by the birth year and count the number of people born each year. It first converts the “birthdate” column to a Date type, extracts the year, and names it “birth_year”. Then, it groups the data by “birth_year” and counts the occurrences of “first_name”, storing the result in the “people_born” column.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birthdate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">polars</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;birth_year&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;people_born&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="join">
<h3>Join<a class="headerlink" href="#join" title="Link to this heading">#</a></h3>
<p>Here is an example code that uses aggregates, joins and select, to calculate the average birth year for each nationality and filter individuals born after their nationality’s average birth year.</p>
<p>First, it groups the dataset by “nationality” and computes the mean birth year, storing the result in the “birth_year_mean” column.</p>
<p>Then, it joins this aggregated data back to the original dataset on “nationality” and filters records where an individual’s birth year is greater than their nationality’s average.</p>
<p>Finally, the code selects only the “last_name,” “birth_year_mean,” and “birthdate” columns to display the relevant information.</p>
<p>Note that the following example is structured differently from the previous examples, because we need to derive the “birth_y_mean” table from “persons” table, to demonstrate the joins operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tabsdata</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">td</span>

<span class="nd">@td</span><span class="o">.</span><span class="n">transformer</span><span class="p">(</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;persons&quot;</span><span class="p">],</span>
    <span class="n">tables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;persons_modified&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">transf</span> <span class="p">(</span><span class="n">tf</span><span class="p">:</span> <span class="n">td</span><span class="o">.</span><span class="n">TableFrame</span><span class="p">):</span>
    <span class="n">birth_y_mean</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;nationality&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birthdate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;birth_year_mean&quot;</span><span class="p">))</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">birth_y_mean</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;nationality&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birthdate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">td</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birth_year_mean&quot;</span><span class="p">))</span>

    <span class="n">tf_modified</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">),</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birth_year_mean&quot;</span><span class="p">),</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;birthdate&quot;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">tf_modified</span>
</pre></div>
</div>
<p>For the complete list you can see the Tabsdata API Reference documentation here. &lt;hyperlink&gt;</p>
</section>
</section>
<section id="table-commits">
<span id="working-with-table-commits"></span><h2>Table Commits<a class="headerlink" href="#table-commits" title="Link to this heading">#</a></h2>
<p>A table commit is generated by a successful execution of a publisher or transformer. When a function reads a table, it reads its latest commit by default.</p>
<p>A commit creation is based on the successful execution of the function and not on changes in the data of the table.</p>
<p>The Tabsdata server retains previous commits and metadata of all tables for auditing and traceability. Once created, the data of a table commit is immutable.</p>
<section id="id3">
<h3>Working with Table Commits<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>Tabsdata uses the HEAD command to refer to the latest commit of a table.</p>
<p>Here is an example of the HEAD commands in use.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tabsdata</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">td</span>

<span class="nd">@td</span><span class="o">.</span><span class="n">transformer</span><span class="p">(</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;minors_g@HEAD^&quot;</span><span class="p">,</span>
        <span class="s2">&quot;adults_g@HEAD-5&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">tables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;minors_g_oldcommit&quot;</span><span class="p">,</span> <span class="s2">&quot;adults_g_oldcommit&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">transfs</span> <span class="p">(</span><span class="n">tf1</span><span class="p">:</span> <span class="n">td</span><span class="o">.</span><span class="n">TableFrame</span><span class="p">,</span> <span class="n">tf2</span><span class="p">:</span> <span class="n">td</span><span class="o">.</span><span class="n">TableFrame</span><span class="p">):</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">tf1</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="n">tf2</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span>
</pre></div>
</div>
<p>In the above example, you define a transformer that takes two tables: 1 table commit behind of minors_g and 5 table commits behind of adults_g, drops nulls from them, and returns the tables as “minors_g_oldcommit” and “adults_g_oldcommit”.</p>
<p>Following commands can be used in the input of transformers and subscribers to refer to the previous commits:</p>
<ul class="simple">
<li><p><strong>HEAD-10</strong>: Refers to the table commit 10 versions before the current one.</p></li>
<li><p><strong>HEAD^^^</strong>: Refers to the table commit 3 versions before the current one.</p></li>
<li><p><strong>HEAD-3..7</strong>: Refers to the list of table commits between 3 and 7 versions before the current one. (3 and 7 are included)</p></li>
<li><p><strong>HEAD, HEAD^^^, HEAD-7..9</strong>: Refers to the list of table commits containing the current commit, the 3rd commit before the current version, and between 7 and 9 versions before the current one.</p></li>
</ul>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-operations">Table Operations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#projection">Projection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#column-selection">Column selection</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dropping-a-column">Dropping a column</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-concatenation">Columns concatenation:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-string-expressions">Columns string expressions:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-type-casting-and-datetime-expressions">Columns type casting and datetime expressions:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-numeric-expressions">Columns numeric expressions:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filter">Filter</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#single-condition-on-column-value">Single condition on column value:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-conditions-on-column-values">Multiple conditions on column values:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aggregation">Aggregation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#join">Join</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#table-commits">Table Commits</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Working with Table Commits</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

<!-- Your custom footer content here -->

  </body>
</html>